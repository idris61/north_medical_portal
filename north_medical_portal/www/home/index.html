{% extends "templates/web.html" %}

{% block title %}{{ _("Home") }}{% endblock %}

{% block page_content %}
<div class="home-page">
	<!-- Hero Carousel Section -->
	<section class="hero-carousel-section">
		<div id="heroCarousel" class="carousel slide" data-ride="carousel" data-interval="5000">
			{% if hero_slides|length > 1 %}
			<ol class="carousel-indicators">
				{% for slide in hero_slides %}
				<li data-target="#heroCarousel" data-slide-to="{{ loop.index0 }}" {% if slide.active %}class="active"{% endif %}></li>
				{% endfor %}
			</ol>
			{% endif %}
			
			<div class="carousel-inner">
				{% for slide in hero_slides %}
				<div class="carousel-item {% if slide.active %}active{% endif %}">
					{% if slide.image %}
						{% if slide.image.startswith('http') %}
							<img class="d-block w-100 hero-carousel-image" src="{{ slide.image }}" alt="Banner" loading="lazy">
						{% else %}
							<img class="d-block w-100 hero-carousel-image" src="{{ frappe.utils.quoted(slide.image) | abs_url }}" alt="Banner" loading="lazy">
						{% endif %}
					{% endif %}
				</div>
				{% endfor %}
			</div>
			
			{% if hero_slides|length > 1 %}
			<a class="carousel-control-prev" href="#heroCarousel" role="button" data-slide="prev">
				<span class="carousel-control-prev-icon" aria-hidden="true"></span>
				<span class="sr-only">{{ _("Previous") }}</span>
			</a>
			<a class="carousel-control-next" href="#heroCarousel" role="button" data-slide="next">
				<span class="carousel-control-next-icon" aria-hidden="true"></span>
				<span class="sr-only">{{ _("Next") }}</span>
			</a>
			{% endif %}
		</div>
	</section>

	<!-- Features Section -->
	<section class="features-section py-5 mb-5">
		<div class="container">
			<div class="row text-center mb-5">
				<div class="col-12">
					<h2 class="section-title mb-3">{{ _("Why Choose North Medical?") }}</h2>
					<p class="section-subtitle text-muted">{{ _("Quality products and reliable service") }}</p>
				</div>
			</div>
			<div class="row">
				<div class="col-md-4 mb-4">
					<div class="feature-card text-center p-4 h-100" style="border: 2px solid transparent; border-radius: 8px;">
						<div class="feature-icon mb-3">
							<i class="fa fa-shield-alt" style="font-size: 48px; color: #0099cc;"></i>
						</div>
						<h4>{{ _("Quality Products") }}</h4>
						<p class="text-muted">{{ _("Certified medical supplies and healthcare products") }}</p>
					</div>
				</div>
				<div class="col-md-4 mb-4">
					<div class="feature-card text-center p-4 h-100" style="border: 2px solid transparent; border-radius: 8px;">
						<div class="feature-icon mb-3">
							<i class="fa fa-truck" style="font-size: 48px; color: #0099cc;"></i>
						</div>
						<h4>{{ _("Fast Delivery") }}</h4>
						<p class="text-muted">{{ _("Quick and reliable shipping across Germany") }}</p>
					</div>
				</div>
				<div class="col-md-4 mb-4">
					<div class="feature-card text-center p-4 h-100" style="border: 2px solid transparent; border-radius: 8px;">
						<div class="feature-icon mb-3">
							<i class="fa fa-headset" style="font-size: 48px; color: #0099cc;"></i>
						</div>
						<h4>{{ _("Expert Support") }}</h4>
						<p class="text-muted">{{ _("Professional customer service and support") }}</p>
					</div>
				</div>
			</div>
		</div>
	</section>

	<!-- Featured Products Section -->
	{% if has_featured_products %}
	<section class="featured-products-section py-5 mb-5">
		<div class="container">
			<div class="row text-center mb-5">
				<div class="col-12">
					<h2 class="section-title mb-3">{{ _("Selected Products") }}</h2>
					<p class="section-subtitle text-muted">{{ _("Top selected products for you") }}</p>
				</div>
			</div>
			<div class="row">
				{% for product in featured_products %}
				<div class="col-md-6 col-lg-4 mb-4">
					<div class="featured-product-card">
						<div class="product-image-container">
							{% if product.image %}
								<a href="{{ product.route if product.route.startswith('/') else '/' + product.route }}" class="product-image-link">
									<img src="{{ frappe.utils.quoted(product.image) | abs_url }}" alt="{{ product.item_name }}" class="product-image">
								</a>
							{% else %}
								<div class="product-image-placeholder">
									<i class="fa fa-box"></i>
								</div>
							{% endif %}
						</div>
						<div class="product-card-body">
							<h5 class="product-title">{{ product.item_name }}</h5>
							{% if product.description %}
							<p class="product-description">{{ product.description[:120] }}{% if product.description|length > 120 %}...{% endif %}</p>
							{% endif %}
							<div class="product-action">
								<a href="{{ product.route if product.route.startswith('/') else '/' + product.route }}" class="btn btn-view-details">
									{{ _("View Details") }}
								</a>
							</div>
						</div>
					</div>
				</div>
				{% endfor %}
			</div>
		</div>
	</section>
	{% endif %}

	<!-- CTA Section -->
	<section class="cta-section py-5" style="background: linear-gradient(135deg, #2a306a 0%, #0099cc 100%); color: white;">
		<div class="container text-center">
			<h2 class="section-title mb-4">{{ _("Ready to Get Started?") }}</h2>
			<p class="lead mb-4">{{ _("Browse our catalog and find the products you need") }}</p>
			<a href="/all-products" class="btn btn-lg cta-btn-red">
				{{ _("Explore Products") }}
			</a>
		</div>
	</section>

	<!-- News Section -->
	<section class="news-section py-5 mb-5" style="background-color: #ffffff;">
		<div class="container">
			<div class="row text-center mb-5">
				<div class="col-12">
					<h2 class="section-title mb-3">{{ _("News") }}</h2>
					<p class="section-subtitle text-muted">{{ _("Latest news from the medical sector") }}</p>
				</div>
			</div>
			{% if news_posts and news_posts|length > 0 %}
			<div class="row">
				{% for post in news_posts %}
				{% if post and post.title %}
				<div class="col-md-4 mb-4">
					<article class="news-card">
						<a href="{{ post.route }}" class="news-card-link">
							<div class="news-image">
								{% if post.image %}
									{% if 'http' in post.image %}
										<img src="{{ post.image }}" alt="{{ post.title }}" loading="lazy">
									{% else %}
										<img src="{{ post.image | abs_url }}" alt="{{ post.title }}" loading="lazy">
									{% endif %}
								{% else %}
									<div class="news-placeholder">
										<i class="fa fa-newspaper"></i>
									</div>
								{% endif %}
							</div>
							<div class="news-content p-4">
								<h4 class="news-title">{{ post.title }}</h4>
								<div class="news-meta text-muted mb-2">
									{% if post.date %}
									<span>{{ post.date }}</span>
									{% endif %}
									{% if post.comments_status %}
									{% if post.date %}<span class="mx-2">|</span>{% endif %}
									<span>{{ post.comments_status }}</span>
									{% endif %}
								</div>
								{% if post.intro and post.intro.strip() %}
								<p class="news-intro">{{ post.intro[:150] }}{% if post.intro|length > 150 %}...{% endif %}</p>
								{% endif %}
							</div>
						</a>
					</article>
				</div>
				{% endif %}
				{% endfor %}
			</div>
			{% else %}
			<div class="row">
				<div class="col-12 text-center">
					<p class="text-muted">{{ _("No news available at the moment.") }}</p>
				</div>
			</div>
			{% endif %}
		</div>
	</section>

	<!-- Partners Section -->
	{% if has_partners %}
	<section class="partners-section py-5 mb-5" style="background-color: #f8f9fa;">
		<div class="container">
			<div class="row text-center mb-5">
				<div class="col-12">
					<h2 class="section-title mb-3">{{ _("Partners") }}</h2>
				</div>
			</div>
			<div class="row g-4">
				{% for partner in partners %}
				<div class="col-md-3 col-sm-6">
					<div class="partner-logo-wrapper">
						{% if partner.image %}
							<img src="{{ partner.image | abs_url }}" alt="{{ partner.name }}" class="partner-logo">
						{% else %}
							<div class="partner-placeholder">
								{{ partner.name }}
							</div>
						{% endif %}
					</div>
				</div>
				{% endfor %}
			</div>
		</div>
	</section>
	{% endif %}
</div>

<style>
.home-page {
	min-height: 100vh;
}

/* Hero Carousel Styles */
.hero-carousel-section {
	margin-top: 0;
	position: relative;
}

#heroCarousel {
	height: auto;
	overflow: hidden;
	position: relative;
}

.carousel-item {
	height: auto;
	position: relative;
}

.hero-carousel-image {
	width: 100%;
	height: auto;
	display: block;
	object-fit: contain;
}

/* Text ve butonlar kaldırıldı - sadece görseller */

/* Carousel Controls */
.carousel-control-prev,
.carousel-control-next {
	width: 50px;
	height: 50px;
	background: white;
	border-radius: 50%;
	top: 50%;
	transform: translateY(-50%);
	opacity: 1;
	transition: all 0.3s ease;
	z-index: 20;
	display: flex;
	align-items: center;
	justify-content: center;
	box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
}

.carousel-control-prev {
	left: 20px;
}

.carousel-control-next {
	right: 20px;
}

.carousel-control-prev:hover,
.carousel-control-next:hover {
	background: white;
	opacity: 1;
	box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
}

.carousel-control-prev-icon,
.carousel-control-next-icon {
	width: 20px;
	height: 20px;
	background-size: 20px 20px;
	filter: brightness(0) saturate(100%) invert(54%) sepia(93%) saturate(1352%) hue-rotate(345deg) brightness(101%) contrast(101%);
}

.carousel-indicators {
	bottom: 20px;
	z-index: 20;
	margin: 0;
	padding: 0;
}

.carousel-indicators li {
	width: 12px;
	height: 12px;
	border-radius: 50%;
	background: rgba(255,255,255,0.5);
	border: 2px solid rgba(255,255,255,0.8);
	margin: 0 5px;
	cursor: pointer;
}

.carousel-indicators li.active {
	background: white;
}

/* Section Titles - Typography Consistency */
.section-title {
	font-size: 2.5rem !important;
	font-weight: 700 !important;
	color: #2a306a !important;
	margin-bottom: 0.75rem !important;
	line-height: 1.2 !important;
}

.section-subtitle {
	font-size: 1.1rem !important;
	color: #7f8c8d !important;
	font-weight: 400 !important;
	line-height: 1.5 !important;
}

/* Responsive Hero */
@media (max-width: 768px) {
	.hero-carousel-image {
		width: 100%;
		height: auto;
	}
}

.feature-card {
	border: 2px solid transparent !important;
	transition: all 0.3s ease;
}

.feature-card:hover {
	transform: translateY(-8px);
	transition: all 0.3s ease;
	box-shadow: 0 6px 20px rgba(255, 107, 53, 0.3) !important;
	border-color: #ff6b35 !important;
}

.feature-card h4 {
	font-size: 1.5rem !important;
	font-weight: 700 !important;
	color: #2a306a !important;
	margin-bottom: 0.75rem !important;
}

.feature-card p {
	font-size: 1rem !important;
	color: #7f8c8d !important;
}


/* News Section */
.news-card {
	background: white;
	border-radius: 8px;
	overflow: hidden;
	box-shadow: 0 2px 4px rgba(0,0,0,0.1);
	transition: all 0.3s ease;
	height: 100%;
	display: flex;
	flex-direction: column;
}

.news-card:hover {
	transform: translateY(-8px);
	box-shadow: 0 6px 20px rgba(255, 107, 53, 0.3);
}

.news-card-link {
	text-decoration: none;
	color: inherit;
	display: flex;
	flex-direction: column;
	height: 100%;
}

.news-card-link:hover {
	text-decoration: none;
	color: inherit;
}

.news-image {
	height: 200px;
	overflow: hidden;
	position: relative;
	background: #f8f9fa;
	min-height: 200px;
}

.news-image img {
	width: 100%;
	height: 100%;
	object-fit: cover;
	transition: transform 0.3s ease;
	display: block;
}

.news-card:hover .news-image img {
	transform: scale(1.05);
}

.news-placeholder {
	width: 100%;
	height: 100%;
	display: flex;
	align-items: center;
	justify-content: center;
	background: linear-gradient(135deg, #2a306a 0%, #0099cc 100%);
}

.news-placeholder i {
	font-size: 64px;
	color: white;
	opacity: 0.8;
}

.news-content {
	flex: 1;
	display: flex;
	flex-direction: column;
}

.news-title {
	font-size: 1.4rem !important;
	font-weight: 700 !important;
	color: #2a306a !important;
	margin-bottom: 0.75rem !important;
	line-height: 1.4 !important;
	min-height: 3.4rem !important;
	display: -webkit-box !important;
	-webkit-line-clamp: 2 !important;
	-webkit-box-orient: vertical !important;
	overflow: hidden !important;
}

.news-meta {
	font-size: 0.875rem;
	margin-bottom: 0.75rem;
}

.news-intro {
	font-size: 0.95rem;
	color: #7f8c8d;
	line-height: 1.6;
	flex: 1;
}

/* Partners Section */
.partner-logo-wrapper {
	background: white;
	border-radius: 8px;
	padding: 25px 20px;
	display: flex;
	align-items: center;
	justify-content: center;
	height: 120px;
	box-shadow: 0 2px 4px rgba(0,0,0,0.1);
	transition: all 0.3s ease;
}

.partner-logo-wrapper:hover {
	transform: translateY(-5px);
	box-shadow: 0 4px 12px rgba(0,0,0,0.15);
}

.partner-logo {
	max-width: 120%;
	max-height: 100px;
	object-fit: contain;
	transition: all 0.3s ease;
}

.partner-placeholder {
	width: 100%;
	height: 100%;
	display: flex;
	align-items: center;
	justify-content: center;
	font-size: 0.85rem;
	font-weight: 500;
	color: #495057;
	text-align: center;
	padding: 10px;
	word-break: break-word;
	line-height: 1.3;
}

.category-content h4 {
	font-size: 1.1rem;
	line-height: 1.5;
	margin-bottom: 0.5rem;
	min-height: 4.5rem;
	max-height: 4.5rem;
	display: -webkit-box;
	-webkit-line-clamp: 3;
	-webkit-box-orient: vertical;
	overflow: hidden;
	text-overflow: ellipsis;
	word-break: break-word;
	hyphens: auto;
	text-align: center;
	padding: 0 0.5rem;
}

.category-content h4 {
	color: #2c3e50;
	margin-bottom: 0.5rem;
}

.category-content .btn {
	margin-top: auto;
}

/* Featured Products Section Styles */
.featured-product-card {
	background: white;
	border-radius: 8px;
	overflow: hidden;
	box-shadow: 0 2px 8px rgba(0,0,0,0.1);
	height: 100%;
	display: flex;
	flex-direction: column;
	transition: all 0.3s ease;
	border: 2px solid transparent;
}

.featured-product-card:hover {
	transform: translateY(-8px);
	box-shadow: 0 6px 20px rgba(255, 107, 53, 0.3);
	border-color: #ff6b35;
}

.product-image-container {
	width: 100%;
	height: 240px;
	background: #f8f9fa;
	display: flex;
	align-items: center;
	justify-content: center;
	padding: 20px;
	overflow: hidden;
	position: relative;
	border-radius: 8px 8px 0 0;
	transition: all 0.3s ease;
}

.product-image-link {
	width: 100%;
	height: 100%;
	display: flex;
	align-items: center;
	justify-content: center;
	text-decoration: none;
}

.product-image {
	max-width: 100%;
	max-height: 100%;
	width: auto;
	height: auto;
	object-fit: contain;
	transition: transform 0.3s ease;
}

.product-image-link:hover .product-image {
	transform: scale(1.05);
}

.product-image-placeholder {
	width: 100%;
	height: 100%;
	display: flex;
	align-items: center;
	justify-content: center;
	background: linear-gradient(135deg, #2a306a 0%, #0099cc 100%);
}

.product-image-placeholder i {
	font-size: 64px;
	color: white;
	opacity: 0.5;
}

.product-card-body {
	padding: 20px;
	flex: 1;
	display: flex;
	flex-direction: column;
}

.product-title {
	font-size: 18px !important;
	font-weight: 700 !important;
	color: #2a306a !important;
	margin-bottom: 10px !important;
	line-height: 1.4 !important;
	min-height: 44px !important;
	display: -webkit-box !important;
	-webkit-line-clamp: 2 !important;
	-webkit-box-orient: vertical !important;
	overflow: hidden !important;
}

.product-description {
	font-size: 13px;
	color: #7f8c8d;
	margin-bottom: 15px;
	line-height: 1.5;
	flex: 1;
	display: -webkit-box;
	-webkit-line-clamp: 3;
	-webkit-box-orient: vertical;
	overflow: hidden;
}

.product-action {
	margin-top: auto;
	padding-top: 10px;
}

.btn-view-details {
	width: 100%;
	font-weight: 600;
	text-transform: uppercase;
	letter-spacing: 0.5px;
	font-size: 13px;
	padding: 12px 20px;
	border-radius: 4px;
	transition: all 0.3s ease;
	background: #ff6b35 !important;
	color: white !important;
	border: none !important;
	box-shadow: 0 2px 4px rgba(255, 107, 53, 0.3);
	text-decoration: none;
	display: inline-block;
}

.btn-view-details:hover {
	transform: translateY(-2px);
	box-shadow: 0 4px 12px rgba(255, 107, 53, 0.5);
	background: #f7931e !important;
	color: white !important;
	text-decoration: none;
}

/* Responsive adjustments */
@media (max-width: 768px) {
	.product-image-container {
		height: 200px;
		padding: 15px;
	}
	
	.product-title {
		font-size: 18px !important;
		min-height: 40px;
	}
	
	.product-description {
		font-size: 13px !important;
	}
	
	.section-title {
		font-size: 2rem !important;
	}
	
	.section-subtitle {
		font-size: 1rem !important;
	}
}

.contact-info p {
	margin-bottom: 0.5rem;
}

.contact-info a {
	color: #0099cc;
	text-decoration: none;
}

.contact-info a:hover {
	text-decoration: underline;
}

/* CTA Section Button */
.cta-btn-red {
	background-color: #ff6b35 !important;
	color: white !important;
	border: none !important;
	padding: 12px 30px !important;
	font-weight: 600 !important;
	transition: all 0.3s ease !important;
	border-radius: 4px !important;
}

.cta-btn-red:hover {
	background-color: #f7931e !important;
	color: white !important;
	transform: translateY(-2px);
	box-shadow: 0 4px 12px rgba(255, 107, 53, 0.4) !important;
}

/* CTA Section Typography */
.cta-section .section-title {
	color: white !important;
	font-size: 2.5rem !important;
	font-weight: 700 !important;
}

.cta-section .lead {
	color: rgba(255, 255, 255, 0.9) !important;
	font-size: 1.2rem !important;
	font-weight: 400 !important;
}
</style>

<script>
frappe.ready(function() {
	// Hero Carousel initialization
	if ($('#heroCarousel').length) {
		$('#heroCarousel').carousel({
			interval: 5000,
			pause: "hover",
			wrap: true,
			keyboard: true
		});
		
		// Ensure controls are clickable
		$('#heroCarousel .carousel-control-prev, #heroCarousel .carousel-control-next').on('click', function(e) {
			e.preventDefault();
			var target = $(this).attr('data-slide');
			if (target === 'prev') {
				$('#heroCarousel').carousel('prev');
			} else {
				$('#heroCarousel').carousel('next');
			}
		});
	}
	
});
</script>
{% endblock %}

